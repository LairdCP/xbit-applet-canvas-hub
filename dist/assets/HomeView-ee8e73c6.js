import{_ as v,d as h,o as n,c as o,a as c,b as i,F as r,r as u,n as d,u as S,x as a,t as l,e as m}from"./index-29c4e9a9.js";const p=h({name:"HomeView",setup(){return{devicesStore:S()}},async beforeRouteLeave(){return await this.devicesStore.stopScanning()===null},async mounted(){this.devicesStore.clear(),await this.devicesStore.disconnectDevice(),await this.devicesStore.startScanning()},methods:{async selectDevice(e){this.devicesStore.selectDevice(e)},async connectDevice(e){a.sendToast({message:"Connecting...",options:{autoClose:!1}}),this.devicesStore.connected&&await this.devicesStore.disconnectDevice(),this.devicesStore.scanningTimeout&&await this.devicesStore.stopScanning(),this.$watch("devicesStore.connected",async t=>{t&&(a.sendClearToast(),this.$router.push({name:"update"}))});try{await this.devicesStore.connectDevice(e)}catch(t){console.log(t),a.sendToast({type:"error",message:"Unable to connect"})}}}}),g={class:"grow max-w-sm"},f={key:0,class:"p-2 m-4 text-white"},w=c("i",{class:"fa-solid fa-arrows-rotate"},null,-1),b={key:1,class:"p-2 m-4 text-white"},y=["onClick"],D={key:0,class:"fas fa-check"},k={class:"action-button btn-gradient-1"},_=["disabled"];function C(e,t,$,T,V,B){return n(),o(r,null,[c("div",g,[e.devicesStore.devices.length===0&&!e.devicesStore.scanningTimeout?(n(),o("h3",f,[i("Scan for BLE Devices "),w])):(n(),o("h3",b,"Select Device")),(n(!0),o(r,null,u(e.devicesStore.devices,s=>(n(),o("div",{key:s.address,class:d(["bg-canvas-slate-500 p-2 m-4 rounded text-white text-center cursor-pointer hover:bg-canvas-slate-600",{"bg-canvas-sky-500":s.address===e.devicesStore.connected,"bg-canvas-slate-600":s.address===e.devicesStore.selected}]),onClick:L=>e.selectDevice(s)},[i(" Device "+l(s.address)+", "+l(s.rssi)+" ",1),s.address===e.devicesStore.selected?(n(),o("i",D)):m("",!0)],10,y))),128))]),c("div",k,[c("button",{onClick:t[0]||(t[0]=s=>e.connectDevice(e.devicesStore.selected)),class:d(["bg-canvas-slate-800 p-4 w-full h-full",{"text-white cursor-pointer":e.devicesStore.selected,"text-gray-600 cursor-not-allowed":!e.devicesStore.selected}]),disabled:!e.devicesStore.selected}," Continue ",10,_)])],64)}const E=v(p,[["render",C]]);export{E as default};
